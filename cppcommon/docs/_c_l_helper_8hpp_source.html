<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C++ Common: CLHelper.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C++ Common
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CLHelper.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  CLHelper.hpp</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  cppcommon</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  Created by Andrew W.E. McDonald</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//  Put into class structure by Sean Grimes on 11/21/15.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//  Copyright Â© 2015. All rights reserved.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#ifdef __APPLE__</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;OpenCL/opencl.h&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;CL/cl.h&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="class_c_l_helper.html">   26</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_c_l_helper.html">CLHelper</a>{</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    </div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a17709459a4e3164aedc244391ea4b7fc">   33</a></span>&#160;    <a class="code" href="class_c_l_helper.html#a17709459a4e3164aedc244391ea4b7fc">CLHelper</a>() : <a class="code" href="class_c_l_helper.html">CLHelper</a>(3, 2) {}</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    </div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a71f2160a072ecd87da8fcc8831ee4fdc">   44</a></span>&#160;    <a class="code" href="class_c_l_helper.html#a71f2160a072ecd87da8fcc8831ee4fdc">CLHelper</a>(<span class="keywordtype">int</span> maxDevices, <span class="keywordtype">int</span> deviceToUse)</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        : err{}</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        , correct{}</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        , maxDevices{maxDevices}</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        , deviceToUse{deviceToUse}</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        device_ids = <span class="keyword">new</span> cl_device_id[maxDevices];</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a63c55d10eb166ef7464cc84d8e82e7aa">   56</a></span>&#160;    <a class="code" href="class_c_l_helper.html#a63c55d10eb166ef7464cc84d8e82e7aa">CLHelper</a>(<a class="code" href="class_c_l_helper.html">CLHelper</a> &amp;&amp;clh) : <a class="code" href="class_c_l_helper.html">CLHelper</a>() </div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        swap(*<span class="keyword">this</span>, clh);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a2b40108d366f787265982757d1089c56">   64</a></span>&#160;    <a class="code" href="class_c_l_helper.html">CLHelper</a> &amp;<a class="code" href="class_c_l_helper.html#a2b40108d366f787265982757d1089c56">operator=</a>(<a class="code" href="class_c_l_helper.html">CLHelper</a> &amp;&amp;clh){</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        swap(*<span class="keyword">this</span>, clh);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a98eb0147c8a06f27990dd491f66f78c5">   72</a></span>&#160;    <a class="code" href="class_c_l_helper.html#a98eb0147c8a06f27990dd491f66f78c5">CLHelper</a>(<span class="keyword">const</span> <a class="code" href="class_c_l_helper.html">CLHelper</a> &amp;clh) </div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        : err{clh.err}</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        , correct{clh.correct}</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        , maxDevices{clh.maxDevices}</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        , device_ids(maxDevices ? <span class="keyword">new</span> cl_device_id[maxDevices] : <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        , deviceToUse{clh.deviceToUse}</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        , device_id{clh.device_id}</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        , context{clh.context}</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        , commands{clh.commands}</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        , num_devices{clh.num_devices}</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        std::copy(clh.device_ids, clh.device_ids + maxDevices, device_ids);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a18a42be4f379b4637ad8a8a3f1d4e82e">   89</a></span>&#160;    <a class="code" href="class_c_l_helper.html">CLHelper</a> &amp;<a class="code" href="class_c_l_helper.html#a18a42be4f379b4637ad8a8a3f1d4e82e">operator=</a>(<a class="code" href="class_c_l_helper.html">CLHelper</a> clh){</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        swap(*<span class="keyword">this</span>, clh);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#af59ace7f61ae7cee62301968cc8b9917">   97</a></span>&#160;    <a class="code" href="class_c_l_helper.html#af59ace7f61ae7cee62301968cc8b9917">~CLHelper</a>(){<span class="keyword">delete</span>[] device_ids;}</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">void</span> swap(<a class="code" href="class_c_l_helper.html">CLHelper</a> &amp;l, <a class="code" href="class_c_l_helper.html">CLHelper</a> &amp;r){</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keyword">using</span> std::swap;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        swap(l.err, r.err);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        swap(l.correct, r.correct);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        swap(l.maxDevices, r.maxDevices);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        swap(l.deviceToUse, r.deviceToUse);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        swap(l.device_ids, r.device_ids);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        swap(l.device_id, r.device_id);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        swap(l.context, r.context);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        swap(l.commands, r.commands);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        swap(l.num_devices, r.num_devices);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a7d95f14b66879d74cea32046cc569793">  117</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_l_helper.html#a7d95f14b66879d74cea32046cc569793">setDeviceToUse</a>(<span class="keywordtype">int</span> deviceNum){</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        deviceToUse = deviceNum;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }   </div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    </div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a2b6576e59adbdfaf924800b4733b7aba">  126</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="class_c_l_helper.html#a2b6576e59adbdfaf924800b4733b7aba">setup_opencl</a>(<span class="keywordtype">void</span>){</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        num_devices = 0;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">if</span>(num_devices == 0){</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            err = clGetDeviceIDs(<span class="keyword">nullptr</span>, CL_DEVICE_TYPE_ALL, maxDevices, device_ids, &amp;num_devices);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <a class="code" href="class_c_l_helper.html#a35e70786c53a5443973a9f10c86ff4ee">check_and_print_cl_err</a>(err);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#ifdef PRINT_LIB_ERRORS</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;num_devices: %d\n&quot;</span>, num_devices);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#ifdef PRINT_LIB_ERRORS</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;num_devices: %d\n&quot;</span>, num_devices);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        </div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        device_id = device_ids[deviceToUse];</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="class_c_l_helper.html#ac2ba4c84b48e752bc104dd5c7b53dfce">print_selected_device_info</a>(device_id, deviceToUse);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        </div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        context = clCreateContext(0, 1, &amp;device_id, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, &amp;err);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="class_c_l_helper.html#a35e70786c53a5443973a9f10c86ff4ee">check_and_print_cl_err</a>(err);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        commands = clCreateCommandQueue(context, device_id, CL_QUEUE_PROFILING_ENABLE, &amp;err);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="class_c_l_helper.html#a35e70786c53a5443973a9f10c86ff4ee">check_and_print_cl_err</a>(err);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    </div><div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a14ace996406fabec7232dc354b0aee27">  155</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_l_helper.html#a14ace996406fabec7232dc354b0aee27">read_kernels_from_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *fname, <span class="keywordtype">char</span> **programBuffer){</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="comment">/* FROM:</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">         -&gt; http://dhruba.name/2012/08/16/opencl-cookbook-creating-programs-and-reading-kernels-from-a-file/</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">// get size of kernel source</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        FILE *programHandle = fopen(fname, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        fseek(programHandle, 0, SEEK_END);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordtype">int</span> programSize = (int)ftell(programHandle);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        rewind(programHandle);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        </div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">// read kernel source into buffer</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        (*programBuffer) = (<span class="keywordtype">char</span>*) malloc(programSize + 1);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        (*programBuffer)[programSize] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        fread((*programBuffer), <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), programSize, programHandle);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        fclose(programHandle);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    </div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a35e70786c53a5443973a9f10c86ff4ee">  177</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_l_helper.html#a35e70786c53a5443973a9f10c86ff4ee">check_and_print_cl_err</a>(<span class="keywordtype">int</span> err){</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">if</span> (err == CL_SUCCESS) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        </div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        std::string err_msg = <a class="code" href="class_c_l_helper.html#a91cb1425e4a3fc2edaa9cc4431b30f2f">get_opencl_error</a>(err);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#ifdef PRINT_LIB_ERRORS</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, err_msg.c_str());</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">throw</span> std::runtime_error(err_msg);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    </div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a06145609d7c71a2f7c783bfcd832d6e4">  192</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_l_helper.html#a06145609d7c71a2f7c783bfcd832d6e4">check_and_print_cl_program_build_err</a>(<span class="keywordtype">int</span> err, cl_program *program){</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> (err != CL_SUCCESS){</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordtype">size_t</span> len;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <span class="keywordtype">char</span> buffer[2048];</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            clGetProgramBuildInfo(*program, device_id, CL_PROGRAM_BUILD_LOG, <span class="keyword">sizeof</span>(buffer), buffer, &amp;len);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Couldn&#39;t build executable&quot;</span>);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    </div><div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#ac2ba4c84b48e752bc104dd5c7b53dfce">  206</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_l_helper.html#ac2ba4c84b48e752bc104dd5c7b53dfce">print_selected_device_info</a>(cl_device_id cdi, <span class="keywordtype">int</span> device_num){</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        </div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordtype">char</span>* value;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordtype">size_t</span> valueSize;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        cl_uint maxComputeUnits;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        </div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="comment">// print device name</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        clGetDeviceInfo(cdi, CL_DEVICE_NAME, 0, NULL, &amp;valueSize);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        value = (<span class="keywordtype">char</span>*) malloc(valueSize);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        clGetDeviceInfo(cdi, CL_DEVICE_NAME, valueSize, value, NULL);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        printf(<span class="stringliteral">&quot;%d. Device: %s\n&quot;</span>, device_num, value);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        free(value);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        </div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="comment">// print hardware device version</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        clGetDeviceInfo(cdi, CL_DEVICE_VERSION, 0, NULL, &amp;valueSize);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        value = (<span class="keywordtype">char</span>*) malloc(valueSize);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        clGetDeviceInfo(cdi, CL_DEVICE_VERSION, valueSize, value, NULL);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        printf(<span class="stringliteral">&quot; %d.%d Hardware version: %s\n&quot;</span>, device_num, 1, value);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        free(value);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        </div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">// print software driver version</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        clGetDeviceInfo(cdi, CL_DRIVER_VERSION, 0, NULL, &amp;valueSize);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        value = (<span class="keywordtype">char</span>*) malloc(valueSize);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        clGetDeviceInfo(cdi, CL_DRIVER_VERSION, valueSize, value, NULL);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        printf(<span class="stringliteral">&quot; %d.%d Software version: %s\n&quot;</span>, device_num, 2, value);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        free(value);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        </div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="comment">// print c version supported by compiler for device</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        clGetDeviceInfo(cdi, CL_DEVICE_OPENCL_C_VERSION, 0, NULL, &amp;valueSize);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        value = (<span class="keywordtype">char</span>*) malloc(valueSize);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        clGetDeviceInfo(cdi, CL_DEVICE_OPENCL_C_VERSION, valueSize, value, NULL);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        printf(<span class="stringliteral">&quot; %d.%d OpenCL C version: %s\n&quot;</span>, device_num, 3, value);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        free(value);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        </div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment">// print parallel compute units</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        clGetDeviceInfo(cdi, CL_DEVICE_MAX_COMPUTE_UNITS, <span class="keyword">sizeof</span>(maxComputeUnits), &amp;maxComputeUnits, NULL);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        printf(<span class="stringliteral">&quot; %d.%d Parallel compute units: %d\n&quot;</span>, device_num, 4, maxComputeUnits);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    </div><div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a91cb1425e4a3fc2edaa9cc4431b30f2f">  250</a></span>&#160;    std::string <a class="code" href="class_c_l_helper.html#a91cb1425e4a3fc2edaa9cc4431b30f2f">get_opencl_error</a>(<span class="keywordtype">int</span> err){</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        </div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">switch</span> (err) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keywordflow">case</span> CL_SUCCESS:</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;No problem!&quot;</span>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">case</span> CL_DEVICE_NOT_FOUND:</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-1&#39; - CL_DEVICE_NOT_FOUND - No OpenCL devices that matched given device type were found&quot;</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">case</span> CL_DEVICE_NOT_AVAILABLE :</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-2&#39; - CL_DEVICE_NOT_AVAILABLE  - No OpenCL compatible device was found&quot;</span>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <span class="keywordflow">case</span> CL_COMPILER_NOT_AVAILABLE:</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-3&#39; - CL_COMPILER_NOT_AVAILABLE - OpenCL Compiler perhaps failed to configure itself, or check your OpenCL installation&quot;</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">case</span> CL_MEM_OBJECT_ALLOCATION_FAILURE:</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-4&#39; - CL_MEM_OBJECT_ALLOCATION_FAILURE - Failed to allocate memory for buffer object&quot;</span>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <span class="keywordflow">case</span> CL_OUT_OF_RESOURCES:</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-5&#39; - CL_OUT_OF_RESOURCES - failure to allocate resources required by the OpenCL implementation on the device&quot;</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">case</span> CL_OUT_OF_HOST_MEMORY:</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-6&#39; - CL_OUT_OF_HOST_MEMORY - failure to allocate resources required by the OpenCL implementation on the host&quot;</span>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordflow">case</span> CL_PROFILING_INFO_NOT_AVAILABLE:</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCl Error: &#39;-7&#39; - CL_PROFILING_INFO_NOT_AVAILABLE - returned by clGetEventProfilingInfo, if the CL_QUEUE_PROFILING_ENABLE flag is not set for the command-queue and if the profiling information is currently not available&quot;</span>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">case</span> CL_MEM_COPY_OVERLAP:</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-8&#39; - CL_MEM_COPY_OVERLAP - if source and destination buffers are the same buffer object and the source and destination regions overlap&quot;</span>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">case</span> CL_IMAGE_FORMAT_MISMATCH:</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-9&#39; - CL_IMAGE_FORMAT_MISMATCH - src and dst image do not use the same image format&quot;</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">case</span> CL_IMAGE_FORMAT_NOT_SUPPORTED:</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-10&#39; - CL_IMAGE_FORMAT_NOT_SUPPORTED - the image format is not supported.&quot;</span>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">case</span> CL_BUILD_PROGRAM_FAILURE:</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-11&#39; - CL_BUILD_PROGRAM_FAILURE - program build error for given device, Use clGetProgramBuildInfo API call to get the build log of the kernel compilation.&quot;</span>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">case</span> CL_MAP_FAILURE:</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-12&#39; - CL_MAP_FAILURE - failed to map the requested region into the host address space. This error does not occur for buffer objects created with CL_MEM_USE_HOST_PTR or CL_MEM_ALLOC_HOST_PTR&quot;</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">case</span> CL_MISALIGNED_SUB_BUFFER_OFFSET :</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-13&#39; - CL_MISALIGNED_SUB_BUFFER_OFFSET  - no devices in given context associated with buffer for which the origin value is aligned to the CL_DEVICE_MEM_BASE_ADDR_ALIGN value&quot;</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="keywordflow">case</span> CL_EXEC_STATUS_ERROR_FOR_EVENTS_IN_WAIT_LIST:</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-14&#39; - CL_EXEC_STATUS_ERROR_FOR_EVENTS_IN_WAIT_LIST - returned by clWaitForEvents(), execution status of any of the events in event list is a negative integer value i.e., error&quot;</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">case</span> CL_COMPILE_PROGRAM_FAILURE:</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-15&#39; - CL_COMPILE_PROGRAM_FAILURE - failed to compile the program source. Error occurs if clCompileProgram does not return until the compile has completed&quot;</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">case</span> CL_LINKER_NOT_AVAILABLE:</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-16&#39; - CL_LINKER_NOT_AVAILABLE - Linker unavailable &quot;</span>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordflow">case</span> CL_LINK_PROGRAM_FAILURE:</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-17&#39; - CL_LINK_PROGRAM_FAILURE - failed to link the compiled binaries and perhaps libraries&quot;</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">case</span> CL_DEVICE_PARTITION_FAILED:</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-18&#39; - CL_DEVICE_PARTITION_FAILED - given partition name is supported by the implementation but input device couldn&#39;t be partitioned further&quot;</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">case</span> CL_KERNEL_ARG_INFO_NOT_AVAILABLE:</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-19&#39; - CL_KERNEL_ARG_INFO_NOT_AVAILABLE - argument information is not available for the given kernel&quot;</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_VALUE:</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-30&#39; - CL_INVALID_VALUE - values passed in the flags parameter is not valid&quot;</span>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_DEVICE_TYPE:</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-31&#39; - CL_INVALID_DEVICE_TYPE - device type specified is not valid, its returned by clCreateContextFromType / clGetDeviceIDs&quot;</span>;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_PLATFORM:</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-32&#39; - CL_INVALID_PLATFORM - the specified platform is not a valid platform, its returned by clGetPlatformInfo /clGetDeviceIDs / clCreateContext / clCreateContextFromType &quot;</span>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_DEVICE:</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-33&#39; - CL_INVALID_DEVICE - device/s specified are not valid&quot;</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_CONTEXT:</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-34&#39; - CL_INVALID_CONTEXT - the given context is invalid OpenCL context, or the context associated with certain parameters are not the same&quot;</span>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_QUEUE_PROPERTIES:</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-35&#39; - CL_INVALID_QUEUE_PROPERTIES - specified properties are valid but are not supported by the device, its returned by  clCreateCommandQueue / clSetCommandQueueProperty&quot;</span>;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_COMMAND_QUEUE:</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-36&#39; - the specified command-queue is not a valid command- CL_INVALID_COMMAND_QUEUE -queue&quot;</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_HOST_PTR:</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-37&#39; - CL_INVALID_HOST_PTR - host pointer is NULL and CL_MEM_COPY_HOST_PTR or CL_MEM_USE_HOST_PTR are set in flags or if host_ptr is not NULL but CL_MEM_COPY_HOST_PTR or CL_MEM_USE_HOST_PTR are not set in flags. returned by clCreateBuffer / clCreateImage2D / clCreateImage3D &quot;</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_MEM_OBJECT:</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-38&#39; - CL_INVALID_MEM_OBJECT - the passed parameter is not a valid memory, image, or buffer object&quot;</span>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_IMAGE_FORMAT_DESCRIPTOR:</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-39&#39; - CL_INVALID_IMAGE_FORMAT_DESCRIPTOR - image format specified is not valid or is NULL, clCreateImage2D /clCreateImage3D returns this.&quot;</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_IMAGE_SIZE:</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-40&#39; - CL_INVALID_IMAGE_SIZE - specified image width or height are outbound (?) or 0&quot;</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_SAMPLER:</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-41&#39; - CL_INVALID_SAMPLER - specified sampler is an invalid sampler object&quot;</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_BINARY:</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-42&#39; - CL_INVALID_BINARY - program binary is not a valid binary for the specified device, returned by clBuildProgram / clCreateProgramWithBinary &quot;</span>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_BUILD_OPTIONS:</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-43&#39; - CL_INVALID_BUILD_OPTIONS - the given build options are not valid&quot;</span>;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_PROGRAM:</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-44&#39; - CL_INVALID_PROGRAM - the given program is an invalid program object, returned by clRetainProgram / clReleaseProgram / clBuildProgram / clGetProgramInfo / clGetProgramBuildInfo / clCreateKernel / clCreateKernelsInProgram &quot;</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_PROGRAM_EXECUTABLE:</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-45&#39; - CL_INVALID_PROGRAM_EXECUTABLE - if there is no successfully built executable for program returned by clCreateKernel, there is no device in program then returned by clCreateKernelsInProgram, if no successfully built program executable present for device associated with command queue then returned by clEnqueueNDRangeKernel / clEnqueueTask&quot;</span>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_KERNEL_NAME:</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-46&#39; - CL_INVALID_KERNEL_NAME - mentioned kernel name is not found in program&quot;</span>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_KERNEL_DEFINITION:</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-47&#39; - CL_INVALID_KERNEL_DEFINITION - arguments mismatch for the __kernel function definition and the passed ones, returned by clCreateKernel&quot;</span>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_KERNEL:</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-48&#39; - CL_INVALID_KERNEL - specified kernel is an invalid kernel object&quot;</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_ARG_INDEX:</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-49&#39; - CL_INVALID_ARG_INDEX - clSetKernelArg if an invalid argument index is specified&quot;</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_ARG_VALUE:</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-50&#39; - CL_INVALID_ARG_VALUE - the argument value specified is NULL, returned by clSetKernelArg&quot;</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_ARG_SIZE:</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-51&#39; - CL_INVALID_ARG_SIZE - the given argument size (arg_size) do not match size of the data type for an argument, returned by clSetKernelArg&quot;</span>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_KERNEL_ARGS:</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-52&#39; - CL_INVALID_KERNEL_ARGS - the kernel argument values have not been specified, returned by clEnqueueNDRangeKernel / clEnqueueTask&quot;</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_WORK_DIMENSION:</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-53&#39; - CL_INVALID_WORK_DIMENSION - given work dimension is an invalid value, returned by clEnqueueNDRangeKernel&quot;</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_WORK_GROUP_SIZE:</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-54&#39; - CL_INVALID_WORK_GROUP_SIZE - the specified local workgroup size and number of workitems specified by global workgroup size is not evenly divisible by local workgroup size&quot;</span>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_WORK_ITEM_SIZE:</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-55&#39; - CL_INVALID_WORK_ITEM_SIZE - no. of workitems specified in any of local work group sizes is greater than the corresponding values specified by CL_DEVICE_MAX_WORK_ITEM_SIZES in that particular dimension&quot;</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_GLOBAL_OFFSET:</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-56&#39; - CL_INVALID_GLOBAL_OFFSET - global_work_offset is not NULL. Must currently be a NULL value. In a future revision of OpenCL, global_work_offset can be used but not until OCL 1.2&quot;</span>;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_EVENT_WAIT_LIST:</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-57&#39; - CL_INVALID_EVENT_WAIT_LIST - event wait list is NULL and (no. of events in wait list &amp;gt; 0), or event wait list is not NULL and no. of events in wait list is 0, or specified event objects are not valid events&quot;</span>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_EVENT:</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-58&#39; - CL_INVALID_EVENT - invalid event objects specified&quot;</span>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_OPERATION:</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-59&#39; - CL_INVALID_OPERATION - &quot;</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_GL_OBJECT:</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-60&#39; - CL_INVALID_GL_OBJECT - not a valid GL buffer object&quot;</span>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_BUFFER_SIZE:</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-61&#39; - CL_INVALID_BUFFER_SIZE - the value of the parameter size is 0 or exceeds CL_DEVICE_MAX_MEM_ALLOC_SIZE for all devices specified in the parameter context, returned by clCreateBuffer&quot;</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_MIP_LEVEL :</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-62&#39; - CL_INVALID_MIP_LEVEL  - &quot;</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_GLOBAL_WORK_SIZE:</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-63&#39; - CL_INVALID_GLOBAL_WORK_SIZE - specified global work size is NULL, or any of the values specified in global work dimensions are 0 or exceeds the range given by the sizeof(size_t) for the device on which the kernel will be enqueued, returned by clEnqueueNDRangeKernel&quot;</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_PROPERTY:</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-64&#39; - CL_INVALID_PROPERTY - context property name in properties is not a supported property name, returned by clCreateContext&quot;</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_IMAGE_DESCRIPTOR:</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-65&#39; - CL_INVALID_IMAGE_DESCRIPTOR - values specified in image description are invalid&quot;</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_COMPILER_OPTIONS:</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-66&#39; - CL_INVALID_COMPILER_OPTIONS - compiler options specified by options are invalid, returned by clCompileProgram&quot;</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_LINKER_OPTIONS:</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-67&#39; - CL_INVALID_LINKER_OPTIONS - linker options specified by options are invalid, returned by clLinkProgram&quot;</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordflow">case</span> CL_INVALID_DEVICE_PARTITION_COUNT:</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;OpenCL Error: &#39;-68&#39; - CL_INVALID_DEVICE_PARTITION_COUNT&quot;</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;No known error definition -- error code: &quot;</span> + std::to_string(err);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    </div><div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="class_c_l_helper.html#a49c3442a227e3c10db5d62487ec21c59">  379</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="class_c_l_helper.html#a49c3442a227e3c10db5d62487ec21c59">print_dferr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *opt){</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;ASCII art has been removed\n&quot;</span>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">if</span> (!(opt == NULL)) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            std::cout &lt;&lt; opt &lt;&lt; std::endl;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        exit(256);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    </div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordtype">int</span> err;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> correct;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">int</span> maxDevices; </div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordtype">int</span> deviceToUse;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    cl_device_id *device_ids = <span class="keyword">new</span> cl_device_id[maxDevices];</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    cl_device_id device_id;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    cl_context context;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    cl_command_queue commands;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    cl_uint num_devices;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;};</div><div class="ttc" id="class_c_l_helper_html_a91cb1425e4a3fc2edaa9cc4431b30f2f"><div class="ttname"><a href="class_c_l_helper.html#a91cb1425e4a3fc2edaa9cc4431b30f2f">CLHelper::get_opencl_error</a></div><div class="ttdeci">std::string get_opencl_error(int err)</div><div class="ttdoc">Convert numeric error code to text. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:250</div></div>
<div class="ttc" id="class_c_l_helper_html_af59ace7f61ae7cee62301968cc8b9917"><div class="ttname"><a href="class_c_l_helper.html#af59ace7f61ae7cee62301968cc8b9917">CLHelper::~CLHelper</a></div><div class="ttdeci">~CLHelper()</div><div class="ttdoc">d&amp;#39;tor </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:97</div></div>
<div class="ttc" id="class_c_l_helper_html_a14ace996406fabec7232dc354b0aee27"><div class="ttname"><a href="class_c_l_helper.html#a14ace996406fabec7232dc354b0aee27">CLHelper::read_kernels_from_file</a></div><div class="ttdeci">void read_kernels_from_file(const char *fname, char **programBuffer)</div><div class="ttdoc">Read kernel source into program buffer. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:155</div></div>
<div class="ttc" id="class_c_l_helper_html_ac2ba4c84b48e752bc104dd5c7b53dfce"><div class="ttname"><a href="class_c_l_helper.html#ac2ba4c84b48e752bc104dd5c7b53dfce">CLHelper::print_selected_device_info</a></div><div class="ttdeci">void print_selected_device_info(cl_device_id cdi, int device_num)</div><div class="ttdoc">Print device information. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:206</div></div>
<div class="ttc" id="class_c_l_helper_html"><div class="ttname"><a href="class_c_l_helper.html">CLHelper</a></div><div class="ttdoc">Removing some OpenCL setup boiler plate. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:26</div></div>
<div class="ttc" id="class_c_l_helper_html_a2b40108d366f787265982757d1089c56"><div class="ttname"><a href="class_c_l_helper.html#a2b40108d366f787265982757d1089c56">CLHelper::operator=</a></div><div class="ttdeci">CLHelper &amp; operator=(CLHelper &amp;&amp;clh)</div><div class="ttdoc">Move assignment. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:64</div></div>
<div class="ttc" id="class_c_l_helper_html_a71f2160a072ecd87da8fcc8831ee4fdc"><div class="ttname"><a href="class_c_l_helper.html#a71f2160a072ecd87da8fcc8831ee4fdc">CLHelper::CLHelper</a></div><div class="ttdeci">CLHelper(int maxDevices, int deviceToUse)</div><div class="ttdoc">c&amp;#39;tor to select which compute device to attempt to use </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:44</div></div>
<div class="ttc" id="class_c_l_helper_html_a49c3442a227e3c10db5d62487ec21c59"><div class="ttname"><a href="class_c_l_helper.html#a49c3442a227e3c10db5d62487ec21c59">CLHelper::print_dferr</a></div><div class="ttdeci">void print_dferr(const char *opt)</div><div class="ttdoc">A relic from our less politically correct days. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:379</div></div>
<div class="ttc" id="class_c_l_helper_html_a17709459a4e3164aedc244391ea4b7fc"><div class="ttname"><a href="class_c_l_helper.html#a17709459a4e3164aedc244391ea4b7fc">CLHelper::CLHelper</a></div><div class="ttdeci">CLHelper()</div><div class="ttdoc">default c&amp;#39;tor, setup for use with MBP on macOS </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:33</div></div>
<div class="ttc" id="class_c_l_helper_html_a2b6576e59adbdfaf924800b4733b7aba"><div class="ttname"><a href="class_c_l_helper.html#a2b6576e59adbdfaf924800b4733b7aba">CLHelper::setup_opencl</a></div><div class="ttdeci">bool setup_opencl(void)</div><div class="ttdoc">See details. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:126</div></div>
<div class="ttc" id="class_c_l_helper_html_a63c55d10eb166ef7464cc84d8e82e7aa"><div class="ttname"><a href="class_c_l_helper.html#a63c55d10eb166ef7464cc84d8e82e7aa">CLHelper::CLHelper</a></div><div class="ttdeci">CLHelper(CLHelper &amp;&amp;clh)</div><div class="ttdoc">Move c&amp;#39;tor. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:56</div></div>
<div class="ttc" id="class_c_l_helper_html_a35e70786c53a5443973a9f10c86ff4ee"><div class="ttname"><a href="class_c_l_helper.html#a35e70786c53a5443973a9f10c86ff4ee">CLHelper::check_and_print_cl_err</a></div><div class="ttdeci">void check_and_print_cl_err(int err)</div><div class="ttdoc">Checks OpenCL errors and prints a more descriptive error message. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:177</div></div>
<div class="ttc" id="class_c_l_helper_html_a06145609d7c71a2f7c783bfcd832d6e4"><div class="ttname"><a href="class_c_l_helper.html#a06145609d7c71a2f7c783bfcd832d6e4">CLHelper::check_and_print_cl_program_build_err</a></div><div class="ttdeci">void check_and_print_cl_program_build_err(int err, cl_program *program)</div><div class="ttdoc">error checking specific to building the kernel (&amp;#39;program&amp;#39;) </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:192</div></div>
<div class="ttc" id="class_c_l_helper_html_a7d95f14b66879d74cea32046cc569793"><div class="ttname"><a href="class_c_l_helper.html#a7d95f14b66879d74cea32046cc569793">CLHelper::setDeviceToUse</a></div><div class="ttdeci">void setDeviceToUse(int deviceNum)</div><div class="ttdoc">See details. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:117</div></div>
<div class="ttc" id="class_c_l_helper_html_a98eb0147c8a06f27990dd491f66f78c5"><div class="ttname"><a href="class_c_l_helper.html#a98eb0147c8a06f27990dd491f66f78c5">CLHelper::CLHelper</a></div><div class="ttdeci">CLHelper(const CLHelper &amp;clh)</div><div class="ttdoc">Copy c&amp;#39;tor. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:72</div></div>
<div class="ttc" id="class_c_l_helper_html_a18a42be4f379b4637ad8a8a3f1d4e82e"><div class="ttname"><a href="class_c_l_helper.html#a18a42be4f379b4637ad8a8a3f1d4e82e">CLHelper::operator=</a></div><div class="ttdeci">CLHelper &amp; operator=(CLHelper clh)</div><div class="ttdoc">Copy assignment. </div><div class="ttdef"><b>Definition:</b> CLHelper.hpp:89</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
